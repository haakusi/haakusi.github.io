<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Palantir MCP Platform - 180+ Analysis Tools Flow Animation</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #0a0e27;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            overflow: hidden;
            width: 100vw;
            height: 100vh;
        }

        .container {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
        }

        svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 50;
        }

        .connection-line {
            stroke: #4facfe;
            stroke-width: 2;
            fill: none;
            opacity: 0;
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            filter: drop-shadow(0 0 5px #4facfe);
            transition: opacity 0.8s ease;
        }

        .connection-line.active {
            opacity: 0.7;
            animation: drawLine 0.8s ease-out forwards;
        }

        .connection-line.finale {
            opacity: 0.6;
            stroke: #9b59b6;
            filter: drop-shadow(0 0 8px #9b59b6) drop-shadow(0 0 15px #8e44ad);
            animation: lightning 0.1s ease-in-out infinite;
        }

        @keyframes lightning {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 0.9; }
        }

        .connection-line.fadeout {
            opacity: 0;
        }

        @keyframes drawLine {
            to {
                stroke-dashoffset: 0;
            }
        }

        .center-hub {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            height: 200px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            font-weight: bold;
            font-size: 14px;
            box-shadow: 0 0 50px rgba(102, 126, 234, 0.5);
            z-index: 100;
            animation: pulse 2s infinite;
            transition: all 0.3s ease;
        }

        .center-hub.executing {
            animation: executeCommand 0.6s ease-out;
            box-shadow: 0 0 100px rgba(102, 126, 234, 1);
        }

        @keyframes pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }

        @keyframes executeCommand {
            0% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 0 50px rgba(102, 126, 234, 0.5);
            }
            50% {
                transform: translate(-50%, -50%) scale(1.15);
                box-shadow: 0 0 150px rgba(102, 126, 234, 1);
            }
            100% {
                transform: translate(-50%, -50%) scale(1);
                box-shadow: 0 0 50px rgba(102, 126, 234, 0.5);
            }
        }

        .x-burst {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 4px;
            height: 80px;
            background: linear-gradient(to bottom, rgba(79, 172, 254, 0.8), transparent);
            transform-origin: center center;
            margin-left: -2px;
            margin-top: -40px;
            opacity: 0;
            filter: blur(1px);
            box-shadow: 0 0 20px #4facfe;
            z-index: 90;
        }

        .x-burst.active {
            animation: xBurst 0.8s ease-out forwards;
        }

        @keyframes xBurst {
            0% {
                opacity: 1;
                height: 0px;
                filter: blur(0px);
                margin-top: 0px;
            }
            50% {
                opacity: 0.8;
                filter: blur(2px);
            }
            100% {
                opacity: 0;
                height: 200px;
                margin-top: -100px;
                filter: blur(4px);
            }
        }

        .x-ring {
            position: fixed;
            top: 50%;
            left: 50%;
            width: 200px;
            height: 200px;
            margin-left: -100px;
            margin-top: -100px;
            border: 3px solid transparent;
            border-radius: 50%;
            border-top-color: rgba(79, 172, 254, 0.8);
            border-right-color: rgba(102, 126, 234, 0.8);
            border-bottom-color: rgba(240, 147, 251, 0.8);
            border-left-color: rgba(118, 75, 162, 0.8);
            opacity: 0;
            transform: rotate(0deg) scale(1);
            z-index: 90;
        }

        .x-ring.active {
            animation: ringExpand 1s ease-out forwards;
        }

        @keyframes ringExpand {
            0% {
                opacity: 1;
                transform: rotate(0deg) scale(1);
            }
            100% {
                opacity: 0;
                transform: rotate(180deg) scale(2.5);
            }
        }

        .domain {
            position: fixed;
            padding: 10px 18px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 8px;
            color: white;
            font-weight: bold;
            font-size: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.95);
            transition: all 0.8s ease;
            z-index: 60;
            white-space: nowrap;
        }

        .domain.dimmed {
            opacity: 0.4;
        }

        .domain.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.05);
            box-shadow: 0 5px 15px rgba(240, 147, 251, 0.4);
        }

        .domain.fadeout {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.8);
        }

        .tool {
            position: fixed;
            padding: 5px 10px;
            background: #ffd93d;
            border-radius: 4px;
            color: #333;
            font-size: 9px;
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.7);
            transition: all 0.8s ease;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            z-index: 70;
            white-space: nowrap;
        }

        .tool.active {
            opacity: 1;
            transform: translate(-50%, -50%) scale(1.08);
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            box-shadow: 0 6px 25px rgba(79, 172, 254, 0.7);
            font-weight: 600;
        }

        .tool.fadeout {
            opacity: 0;
            transform: translate(-50%, -50%) scale(0.7);
        }

        .spark {
            position: fixed;
            width: 8px;
            height: 8px;
            background: #fff;
            border-radius: 50%;
            box-shadow: 0 0 10px #4facfe, 0 0 20px #4facfe;
            z-index: 99;
            pointer-events: none;
            transform: translate(-50%, -50%);
        }


        .prompt-input {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, calc(-50% - 180px));
            width: 600px;
            padding: 12px 18px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            color: rgba(255, 255, 255, 0.7);
            font-size: 14px;
            backdrop-filter: blur(10px);
            z-index: 200;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
        }

        .info-box {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 12px 18px;
            border-radius: 10px;
            color: white;
            backdrop-filter: blur(10px);
            z-index: 200;
            font-size: 13px;
        }

        .status {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, calc(-50% - 130px));
            color: #4facfe;
            font-size: 15px;
            font-weight: bold;
            opacity: 0;
            transition: opacity 0.3s;
            text-shadow: 0 0 10px rgba(79, 172, 254, 0.8);
            z-index: 200;
        }

        .status.active {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="prompt-input" id="promptInput">Palantir MCP Platform Analysis Scenario...</div>

        <div class="status" id="status"></div>

        <svg id="connectionSvg"></svg>

        <div class="center-hub" id="centerHub">
            üéØ Palantir MCP Platform<br/>
            180+ Analysis Tools<br/>
            Data Intelligence
        </div>

        <div class="info-box">
            <div id="toolCount">üîß Activated Tools: 0/180+</div>
        </div>
    </div>

    <script>
        const centerX = 50;
        const centerY = 50;

        const domains = [
            {
                name: "üîå Data Sources (15)",
                angle: 313,
                distance: 50,
                tools: ["connect-database", "connect-api", "connect-file-system", "connect-cloud-storage", "sync-data-source", "validate-connection", "test-data-source", "get-data-source-info", "list-data-sources", "update-data-source", "disconnect-source", "schedule-sync", "monitor-data-quality", "detect-schema-changes", "backup-data-source"],
                keywords: ["Îç∞Ïù¥ÌÑ∞ÏÜåÏä§", "Ïó∞Í≤∞", "database", "api", "ÌååÏùº", "ÌÅ¥ÎùºÏö∞Îìú", "ÎèôÍ∏∞Ìôî", "Í≤ÄÏ¶ù", "Ïä§ÌÇ§Îßà", "Î∞±ÏóÖ", "data source", "connection", "sync"]
            },
            {
                name: "üë§ Entities (18)",
                angle: 59,
                distance: 35,
                tools: ["create-entity", "update-entity", "delete-entity", "search-entities", "get-entity-details", "merge-entities", "split-entity", "tag-entity", "link-entities", "get-entity-history", "export-entities", "bulk-create-entities", "validate-entity-data", "enrich-entity", "get-entity-relationships", "set-entity-properties", "get-entity-timeline", "classify-entity"],
                keywords: ["ÏóîÌã∞Ìã∞", "Í∞úÏ≤¥", "entity", "ÏÉùÏÑ±", "ÏàòÏ†ï", "ÏÇ≠Ï†ú", "Í≤ÄÏÉâ", "Î≥ëÌï©", "Î∂ÑÌï†", "ÌÉúÍ∑∏", "ÎßÅÌÅ¨", "ÌûàÏä§ÌÜ†Î¶¨", "Î∂ÑÎ•ò", "ÏÜçÏÑ±"]
            },
            {
                name: "üîó Relationships (16)",
                angle: 200,
                distance: 39,
                tools: ["create-relationship", "analyze-relationships", "find-path-between-entities", "detect-communities", "identify-key-players", "map-relationship-network", "calculate-relationship-strength", "visualize-connections", "find-common-connections", "detect-anomalies-in-network", "export-relationship-graph", "filter-relationships", "get-relationship-details", "update-relationship", "delete-relationship", "analyze-relationship-patterns"],
                keywords: ["Í¥ÄÍ≥Ñ", "Ïó∞Í≤∞", "relationship", "ÎÑ§Ìä∏ÏõåÌÅ¨", "Í≤ΩÎ°ú", "Ïª§ÎÆ§ÎãàÌã∞", "Ï§ëÏã¨Ïù∏Î¨º", "Í∑∏ÎûòÌîÑ", "ÏãúÍ∞ÅÌôî", "Ïù¥ÏÉÅ", "Ìå®ÌÑ¥", "Î∂ÑÏÑù"]
            },
            {
                name: "üìä Analytics (20)",
                angle: 100,
                distance: 33,
                tools: ["run-analytics-query", "create-custom-query", "execute-statistical-analysis", "perform-clustering", "detect-outliers", "calculate-correlations", "run-machine-learning-model", "predict-trends", "analyze-time-series", "compare-datasets", "generate-insights", "create-data-profile", "analyze-distribution", "perform-regression", "calculate-metrics", "aggregate-data", "filter-and-transform", "join-datasets", "export-analysis-results", "schedule-analytics-job"],
                keywords: ["Î∂ÑÏÑù", "ÏøºÎ¶¨", "analytics", "query", "ÌÜµÍ≥Ñ", "ÌÅ¥Îü¨Ïä§ÌÑ∞ÎßÅ", "Ïù¥ÏÉÅÏπò", "ÏÉÅÍ¥ÄÍ¥ÄÍ≥Ñ", "Î®∏Ïã†Îü¨Îãù", "ÏòàÏ∏°", "Ìä∏Î†åÎìú", "Ïù∏ÏÇ¨Ïù¥Ìä∏", "ÌîÑÎ°úÌååÏùº", "ÌöåÍ∑Ä", "Î©îÌä∏Î¶≠"]
            },
            {
                name: "‚è±Ô∏è Timeline (12)",
                angle: 138,
                distance: 43,
                tools: ["create-timeline", "add-timeline-event", "analyze-temporal-patterns", "detect-timeline-anomalies", "compare-timelines", "filter-by-time-range", "visualize-timeline", "export-timeline-data", "get-timeline-events", "merge-timelines", "calculate-time-differences", "identify-temporal-correlations"],
                keywords: ["ÌÉÄÏûÑÎùºÏù∏", "ÏãúÍ∞Ñ", "timeline", "ÏãúÍ∞ÑÏàú", "Ïù¥Î≤§Ìä∏", "Ìå®ÌÑ¥", "Ïù¥ÏÉÅ", "ÎπÑÍµê", "ÏãúÍ∞ÅÌôî", "ÏÉÅÍ¥ÄÍ¥ÄÍ≥Ñ", "temporal", "time"]
            },
            {
                name: "üó∫Ô∏è Geospatial (14)",
                angle: 172,
                distance: 38,
                tools: ["geocode-address", "reverse-geocode", "calculate-distance", "find-nearby-entities", "create-geofence", "analyze-spatial-patterns", "visualize-on-map", "detect-spatial-clusters", "analyze-movement-patterns", "export-geospatial-data", "filter-by-location", "get-location-history", "set-coordinates", "analyze-geographic-distribution"],
                keywords: ["ÏßÄÎ¶¨Í≥µÍ∞Ñ", "ÏßÄÎèÑ", "geospatial", "geographic", "Ï¢åÌëú", "ÏúÑÏπò", "Í±∞Î¶¨", "ÏßÄÏò§ÌéúÏä§", "ÌÅ¥Îü¨Ïä§ÌÑ∞", "Ïù¥Îèô", "Î∂ÑÌè¨", "ÏßÄÏò§ÏΩîÎî©", "location"]
            },
            {
                name: "üîç Investigation (22)",
                angle: 220,
                distance: 46,
                tools: ["create-investigation-case", "add-evidence-to-case", "link-entities-to-case", "add-notes-to-case", "assign-case-investigator", "update-case-status", "search-cases", "get-case-details", "export-case-report", "merge-cases", "close-case", "reopen-case", "add-timeline-to-case", "create-case-hypothesis", "validate-hypothesis", "generate-case-summary", "share-case-with-team", "set-case-priority", "add-case-tags", "get-case-timeline", "analyze-case-connections", "create-case-visualization"],
                keywords: ["Ï°∞ÏÇ¨", "ÏºÄÏù¥Ïä§", "investigation", "case", "Ï¶ùÍ±∞", "Ï¶ùÏù∏", "Í∞ÄÏÑ§", "Í≤ÄÏ¶ù", "Î¶¨Ìè¨Ìä∏", "ÏöîÏïΩ", "Ïö∞ÏÑ†ÏàúÏúÑ", "ÌÉúÍ∑∏", "ÌåÄ", "ÏãúÍ∞ÅÌôî"]
            },
            {
                name: "üì¢ Notifications (10)",
                angle: 235,
                distance: 37,
                tools: ["create-alert-rule", "subscribe-to-events", "send-notification", "get-notification-history", "update-alert-rule", "delete-alert-rule", "test-notification", "configure-notification-channel", "get-alert-statistics", "mute-notifications"],
                keywords: ["ÏïåÎ¶º", "Î™®ÎãàÌÑ∞ÎßÅ", "notification", "alert", "ÏïåÎûå", "Íµ¨ÎèÖ", "Ïù¥Î≤§Ìä∏", "Ï±ÑÎÑê", "ÌÜµÍ≥Ñ", "ÏùåÏÜåÍ±∞", "monitoring"]
            },
            {
                name: "üìÑ Reports (15)",
                angle: 294,
                distance: 41,
                tools: ["create-report", "generate-standard-report", "export-report-pdf", "export-report-excel", "schedule-report", "share-report", "get-report-history", "update-report-template", "create-custom-report", "add-charts-to-report", "filter-report-data", "format-report", "publish-report", "archive-report", "get-report-analytics"],
                keywords: ["Î≥¥Í≥†ÏÑú", "Î¶¨Ìè¨Ìä∏", "report", "ÏÉùÏÑ±", "ÎÇ¥Î≥¥ÎÇ¥Í∏∞", "pdf", "excel", "Ïä§ÏºÄÏ§Ñ", "Í≥µÏú†", "ÌÖúÌîåÎ¶ø", "Ï∞®Ìä∏", "Ìè¨Îß∑", "Î∞úÌñâ", "ÏïÑÏπ¥Ïù¥Î∏å"]
            },
            {
                name: "ü§ù Collaboration (11)",
                angle: 270,
                distance: 40,
                tools: ["create-workspace", "invite-team-member", "share-analysis", "add-comments", "create-bookmark", "follow-entity", "create-shared-dashboard", "assign-task", "get-team-activity", "export-collaboration-log", "manage-permissions"],
                keywords: ["ÌòëÏóÖ", "ÌåÄ", "collaboration", "team", "ÏõåÌÅ¨Ïä§ÌéòÏù¥Ïä§", "Í≥µÏú†", "ÎåìÍ∏Ä", "Î∂ÅÎßàÌÅ¨", "ÎåÄÏãúÎ≥¥Îìú", "ÏûëÏóÖ", "Í∂åÌïú", "ÌôúÎèô"]
            },
            {
                name: "üîê Security (13)",
                angle: 345,
                distance: 27,
                tools: ["authenticate-user", "authorize-action", "audit-user-activity", "detect-security-threats", "analyze-access-patterns", "enforce-data-governance", "mask-sensitive-data", "encrypt-data", "decrypt-data", "manage-api-keys", "rotate-credentials", "get-security-alerts", "generate-security-report"],
                keywords: ["Î≥¥Ïïà", "Ïù∏Ï¶ù", "Í∂åÌïú", "security", "authentication", "authorization", "ÏúÑÌòë", "Í∞êÏÇ¨", "Í±∞Î≤ÑÎÑåÏä§", "ÏïîÌò∏Ìôî", "ÎßàÏä§ÌÇπ", "apiÌÇ§", "ÏûêÍ≤©Ï¶ùÎ™Ö"]
            },
            {
                name: "üìà Visualization (12)",
                angle: 33,
                distance: 26,
                tools: ["create-chart", "create-graph", "create-map-visualization", "create-network-diagram", "create-timeline-view", "create-dashboard", "export-visualization", "share-visualization", "update-visualization", "get-visualization-templates", "apply-visualization-style", "interactive-exploration"],
                keywords: ["ÏãúÍ∞ÅÌôî", "Ï∞®Ìä∏", "Í∑∏ÎûòÌîÑ", "visualization", "chart", "graph", "ÏßÄÎèÑ", "ÎÑ§Ìä∏ÏõåÌÅ¨", "ÎåÄÏãúÎ≥¥Îìú", "ÌÖúÌîåÎ¶ø", "Ïä§ÌÉÄÏùº", "ÌÉêÏÉâ"]
            },
            {
                name: "üìù Audit Trail (10)",
                angle: 36,
                distance: 48,
                tools: ["search-audit-logs", "filter-audit-by-user", "filter-audit-by-action", "filter-audit-by-date", "export-audit-report", "get-audit-summary", "detect-audit-anomalies", "track-data-changes", "monitor-compliance", "generate-compliance-report"],
                keywords: ["Í∞êÏÇ¨", "Ï∂îÏ†Å", "audit", "trail", "Î°úÍ∑∏", "Î≥ÄÍ≤Ω", "Ïª¥ÌîåÎùºÏù¥Ïñ∏Ïä§", "Ïù¥ÏÉÅ", "ÏöîÏïΩ", "Î¶¨Ìè¨Ìä∏", "compliance"]
            }
        ];

        const container = document.querySelector('.container');
        const svg = document.getElementById('connectionSvg');

        domains.forEach((domain, idx) => {
            const domainEl = document.createElement('div');
            domainEl.className = 'domain';
            domainEl.textContent = domain.name;

            const angle = (domain.angle * Math.PI) / 180;
            const domainX = centerX + Math.cos(angle) * domain.distance;
            const domainY = centerY + Math.sin(angle) * domain.distance;

            domainEl.style.left = domainX + 'vw';
            domainEl.style.top = domainY + 'vh';
            container.appendChild(domainEl);

            domain.element = domainEl;
            domain.vx = domainX;
            domain.vy = domainY;

            const toolCount = domain.tools.length;
            const minDistance = 10; // ÏµúÏÜå Í±∞Î¶¨ (vw) - Ï¶ùÍ∞Ä (9 ‚Üí 10)
            const maxAttempts = 100; // ÏµúÎåÄ ÏãúÎèÑ ÌöüÏàò Ï¶ùÍ∞Ä

            domain.toolElements = [];

            // Î™®Îì† ÎèÑÍµ¨Ïùò ÏúÑÏπòÎ•º Ï†ÄÏû•Ìï† Î∞∞Ïó¥
            const allToolPositions = [];

            domain.tools.forEach((tool, toolIdx) => {
                const toolEl = document.createElement('div');
                toolEl.className = 'tool';
                toolEl.textContent = tool;

                let toolX, toolY;
                let validPosition = false;
                let attempts = 0;

                // Îâ¥Îü¥ ÎÑ§Ìä∏ÏõåÌÅ¨ ÏãúÎÉÖÏä§Ï≤òÎüº Î∞©ÏÇ¨ÌòïÏúºÎ°ú Î∞∞Ïπò
                while (!validPosition && attempts < maxAttempts) {
                    // ÏõêÌòï Î†àÏù¥Ïñ¥ Î∞©Ïãù Î∞∞Ïπò
                    const layerIndex = Math.floor(toolIdx / 8); // 8Í∞úÏî© Ìïú Î†àÏù¥Ïñ¥
                    const positionInLayer = toolIdx % 8;

                    // Í∏∞Î≥∏ Í∞ÅÎèÑ (Í∑†Îì± Î∂ÑÎ∞∞)
                    const baseAngle = (positionInLayer / 8) * Math.PI * 2 + (layerIndex * 0.3);
                    const angleVariation = (Math.random() - 0.5) * 0.4; // ÏïΩÍ∞ÑÏùò Î≥ÄÌôî
                    const finalAngle = baseAngle + angleVariation;

                    // Í±∞Î¶¨ (Î†àÏù¥Ïñ¥Î≥ÑÎ°ú Î©ÄÏñ¥Ïßê) - 80% Ï∂ïÏÜå
                    const baseRadius = 9.6 + (layerIndex * 3.2); // 9.6, 12.8, 16, 19.2vw... (80%)
                    const radiusVariation = (Math.random() - 0.5) * 1.6; // ÏïΩÍ∞ÑÏùò Î≥ÄÌôî (80%)
                    const finalRadius = baseRadius + radiusVariation;

                    toolX = domainX + Math.cos(finalAngle) * finalRadius;
                    toolY = domainY + Math.sin(finalAngle) * finalRadius;

                    // ÌôîÎ©¥ Í≤ΩÍ≥Ñ Ï≤¥ÌÅ¨ (8% ~ 92% Î≤îÏúÑ ÎÇ¥ - Îçî ÏïàÏ†ÑÌïòÍ≤å)
                    if (toolX < 8 || toolX > 92 || toolY < 8 || toolY > 92) {
                        validPosition = false;
                        attempts++;
                        continue;
                    }

                    // Î™®Îì† Ìï∏Îì§Îü¨ÏôÄÏùò Í±∞Î¶¨ Ï≤¥ÌÅ¨ (ÏµúÏÜå 13vw)
                    let tooCloseToHandler = false;
                    domains.forEach(otherDomain => {
                        const dxFromHandler = toolX - otherDomain.vx;
                        const dyFromHandler = toolY - otherDomain.vy;
                        const distanceFromHandler = Math.sqrt(dxFromHandler * dxFromHandler + dyFromHandler * dyFromHandler);

                        if (distanceFromHandler < 13) { // Î™®Îì† Ìï∏Îì§Îü¨Î°úÎ∂ÄÌÑ∞ 13vw Ïù¥ÏÉÅ
                            tooCloseToHandler = true;
                        }
                    });

                    if (tooCloseToHandler) {
                        validPosition = false;
                        attempts++;
                        continue;
                    }

                    // Îã§Î•∏ ÎèÑÍµ¨Îì§Í≥ºÏùò Í±∞Î¶¨ Ï≤¥ÌÅ¨
                    validPosition = true;
                    for (const pos of allToolPositions) {
                        const dx = toolX - pos.x;
                        const dy = toolY - pos.y;
                        const distance = Math.sqrt(dx * dx + dy * dy);

                        if (distance < minDistance) {
                            validPosition = false;
                            break;
                        }
                    }

                    attempts++;
                }

                // ÏúÑÏπò Ï†ÄÏû•
                allToolPositions.push({ x: toolX, y: toolY });

                toolEl.style.left = toolX + 'vw';
                toolEl.style.top = toolY + 'vh';
                container.appendChild(toolEl);

                domain.toolElements.push({
                    element: toolEl,
                    vx: toolX,
                    vy: toolY
                });
            });
        });

        function createLine(x1, y1, x2, y2) {
            const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            line.setAttribute('x1', x1 + '%');
            line.setAttribute('y1', y1 + '%');
            line.setAttribute('x2', x2 + '%');
            line.setAttribute('y2', y2 + '%');
            line.setAttribute('class', 'connection-line');
            svg.appendChild(line);
            return line;
        }

        function createSpark(x, y) {
            const spark = document.createElement('div');
            spark.className = 'spark';
            spark.style.left = x + 'vw';
            spark.style.top = y + 'vh';
            container.appendChild(spark);

            setTimeout(() => {
                spark.style.transition = 'all 0.3s ease-out';
                spark.style.transform = 'translate(-50%, -50%) scale(2)';
                spark.style.opacity = '0';
            }, 50);

            setTimeout(() => spark.remove(), 400);
        }


        function createXBurst() {
            const angles = [45, 135, 225, 315];

            angles.forEach((angle, idx) => {
                setTimeout(() => {
                    const burst = document.createElement('div');
                    burst.className = 'x-burst';
                    burst.style.transform = `rotate(${angle}deg)`;
                    container.appendChild(burst);

                    setTimeout(() => burst.classList.add('active'), 10);
                    setTimeout(() => burst.remove(), 1000);
                }, idx * 50);
            });
        }

        function createXRing() {
            const ring = document.createElement('div');
            ring.className = 'x-ring';
            container.appendChild(ring);

            setTimeout(() => ring.classList.add('active'), 10);
            setTimeout(() => ring.remove(), 1200);
        }

        function animateFlow(prompt) {
            const status = document.getElementById('status');
            const toolCount = document.getElementById('toolCount');
            let activatedTools = 0;

            svg.innerHTML = '';

            // Î™®Îì† ÎèÑÍµ¨ÏôÄ ÎèÑÎ©îÏù∏ Ï¥àÍ∏∞Ìôî
            document.querySelectorAll('.tool').forEach(el => {
                el.classList.remove('active');
            });

            // Î™®Îì† ÎèÑÍµ¨ Ïó∞ÌïòÍ≤å (ÏãúÎÇòÎ¶¨Ïò§ÎßàÎã§ Ï¥àÍ∏∞Ìôî, Ìï∏Îì§Îü¨Îäî Ïñ¥ÎëêÏö¥ ÏÉÅÌÉú)
            domains.forEach(domain => {
                domain.element.classList.remove('active');
                domain.element.classList.add('dimmed'); // Ìï∏Îì§Îü¨Îäî Ïñ¥ÎëêÏö¥ ÏÉÅÌÉú (0.4)
                domain.toolElements.forEach(tool => {
                    // visibilityÎäî visibleÎ°ú Ïú†ÏßÄ, opacity ÏïÑÏ£º Ïó∞ÌïòÍ≤å
                    tool.element.style.visibility = 'visible';
                    tool.element.style.opacity = '0.15'; // 0 ‚Üí 0.15 (ÏïÑÏ£º Ïó∞ÌïòÍ≤å)
                    tool.element.classList.remove('active');
                });
            });

            document.getElementById('centerHub').classList.add('executing');
            setTimeout(() => document.getElementById('centerHub').classList.remove('executing'), 600);

            createXBurst();
            createXRing();

            status.textContent = '‚ö° Processing...';
            status.classList.add('active');
            status.style.opacity = '1'; // ÌôïÏã§Ìûà Î≥¥Ïù¥Í≤å

            // ÏãúÎÇòÎ¶¨Ïò§Î≥Ñ Ï†ïÌôïÌïú ÎèÑÎ©îÏù∏ Îß§Ìïë
            let matchedDomains = [];

            // ÌòÑÏû¨ ÏãúÎÇòÎ¶¨Ïò§ Ïù∏Îç±Ïä§ Ï∞æÍ∏∞
            const scenarioIndex = scenarios.indexOf(prompt);

            switch(scenarioIndex) {
                case 0: // "Hi. Who are you?"
                    matchedDomains = domains.filter(d =>
                        d.name.includes('Security') || d.name.includes('Collaboration')
                    );
                    break;
                case 1: // "Analyze the relationship network..."
                    matchedDomains = domains.filter(d =>
                        d.name.includes('Relationships') || d.name.includes('Entities') ||
                        d.name.includes('Analytics') || d.name.includes('Visualization') ||
                        d.name.includes('Investigation')
                    );
                    break;
                case 2: // "Show me the entity details..."
                    matchedDomains = domains.filter(d =>
                        d.name.includes('Entities') || d.name.includes('Timeline')
                    );
                    break;
                case 3: // "Create a report of the investigation..."
                    matchedDomains = domains.filter(d =>
                        d.name.includes('Reports') || d.name.includes('Investigation')
                    );
                    break;
                case 4: // "Detect anomalies in the data..."
                    matchedDomains = domains.filter(d =>
                        d.name.includes('Analytics') || d.name.includes('Notifications')
                    );
                    break;
                case 5: // "Investigate the connections between..."
                    matchedDomains = domains.filter(d =>
                        d.name.includes('Investigation') || d.name.includes('Relationships') ||
                        d.name.includes('Geospatial') || d.name.includes('Timeline') ||
                        d.name.includes('Reports')
                    );
                    break;
                default:
                    // ÌÇ§ÏõåÎìú Îß§Ïπ≠ Ìè¥Î∞±
                    matchedDomains = domains.filter(domain =>
                        domain.keywords.some(keyword =>
                            prompt.toLowerCase().includes(keyword.toLowerCase())
                        )
                    );
            }

            if (matchedDomains.length === 0) {
                matchedDomains.push(...domains.slice(0, 3));
            }

            matchedDomains.forEach((domain, idx) => {
                setTimeout(() => {
                    const line1 = createLine(centerX, centerY, domain.vx, domain.vy);
                    setTimeout(() => line1.classList.add('active'), 75);

                    setTimeout(() => {
                        domain.element.classList.add('active');
                        createSpark(domain.vx, domain.vy);
                    }, 225); // 450 / 2

                    // Î™®Îì† ÎèÑÍµ¨ ÌëúÏãú
                    domain.toolElements.forEach((tool, toolIdx) => {
                        setTimeout(() => {
                            const line2 = createLine(domain.vx, domain.vy, tool.vx, tool.vy);
                            setTimeout(() => line2.classList.add('active'), 75);

                            setTimeout(() => {
                                tool.element.style.visibility = 'visible';
                                tool.element.style.opacity = '1';
                                tool.element.classList.add('active');
                                createSpark(tool.vx, tool.vy);
                                activatedTools++;
                                toolCount.textContent = `üîß Activated Tools: ${activatedTools}/180+`;
                            }, 225); // 450 / 2
                        }, toolIdx * 60); // 120 / 2
                    });
                }, idx * 375 + 300); // 750 / 2 + 600 / 2
            });

            const maxTools = Math.max(...matchedDomains.map(d => d.tools.length));
            const totalTime = 300 + (matchedDomains.length * 375) + (maxTools * 60) + 600; // Î™®Îëê 2Î∞∞ Îπ†Î•¥Í≤å

            // Ïï†ÎãàÎ©îÏù¥ÏÖò ÏôÑÎ£å ÌõÑ Î∞îÎ°ú DoneÏúºÎ°ú Î≥ÄÍ≤Ω
            setTimeout(() => {
                status.textContent = '‚úÖ Done!';
                status.style.opacity = '1';

                // Done ÌëúÏãú ÌõÑ 0.7Ï¥à ÎåÄÍ∏∞
                setTimeout(() => {
                        // DoneÎèÑ Ìï®Íªò fade-out
                        status.style.transition = 'opacity 0.8s ease';
                        status.style.opacity = '0';

                        // ÎùºÏù∏Îì§ÎèÑ ÎèôÏãúÏóê fade-out
                        document.querySelectorAll('.connection-line').forEach(line => {
                            line.style.transition = 'opacity 0.8s ease';
                            line.style.opacity = '0';
                        });

                        // ÎèÑÍµ¨Îì§Í≥º Ìï∏Îì§Îü¨ ÎèôÏãúÏóê Ïó∞ÌïòÍ≤å ÎèåÏïÑÍ∞ê
                        matchedDomains.forEach(domain => {
                            // Ìï∏Îì§Îü¨ÎèÑ ÎèôÏãúÏóê Ïó∞ÌïòÍ≤å
                            domain.element.style.transition = 'opacity 0.8s ease, transform 0.8s ease, box-shadow 0.8s ease';
                            domain.element.classList.remove('active');
                            domain.element.classList.add('dimmed');

                            domain.toolElements.forEach(tool => {
                                if (tool.element.classList.contains('active')) {
                                    tool.element.style.transition = 'opacity 0.8s ease';
                                    tool.element.style.opacity = '0.15'; // 0 ‚Üí 0.15 (Ïó∞ÌïòÍ≤å)
                                    tool.element.classList.remove('active');
                                }
                            });
                        });

                        // 800ms ÌõÑ ÎùºÏù∏ ÏôÑÏ†ÑÌûà Ï†úÍ±∞ÌïòÍ≥† status Ï¥àÍ∏∞Ìôî
                        setTimeout(() => {
                            svg.innerHTML = '';
                            status.classList.remove('active');
                            // opacityÎäî Îã§Ïùå ÏãúÎÇòÎ¶¨Ïò§ ÏãúÏûë Ïãú ÏûêÎèôÏúºÎ°ú ÏÑ§Ï†ïÎê®
                        }, 800);
                }, 700); // Done ÌëúÏãú ÌõÑ 0.7Ï¥à ÎåÄÍ∏∞
            }, totalTime);

            return totalTime; // Processing ÏóÜÏù¥ Î∞îÎ°ú Done
        }

        function grandFinale() {
            document.getElementById('promptInput').textContent = 'üéÜ All Analysis Systems Activated!';

            const status = document.getElementById('status');
            status.textContent = 'All 180+ Analysis Tools Ready! üåü';
            status.classList.add('active');

            svg.innerHTML = '';

            document.querySelectorAll('.domain, .tool').forEach(el => {
                el.classList.remove('active');
            });

            // 1Îã®Í≥Ñ: Ïó∞Ìïú ÎÖ∏ÎûÄÏÉâÏúºÎ°ú 3Ï¥àÍ∞Ñ ÏÑúÏÑúÌûà Î™®Îì† ÎèÑÍµ¨ ÏºúÍ∏∞
            domains.forEach((domain, idx) => {
                setTimeout(() => {
                    domain.element.classList.add('dimmed'); // Ìï∏Îì§Îü¨Îäî Ïñ¥ÎëêÏö¥ ÏÉÅÌÉú

                    domain.toolElements.forEach((tool, toolIdx) => {
                        setTimeout(() => {
                            tool.element.style.transition = 'opacity 1s ease';
                            tool.element.style.opacity = '0.35';
                            tool.element.style.visibility = 'visible';
                        }, toolIdx * 35);
                    });
                }, idx * 120);
            });

            // 2Îã®Í≥Ñ: 5Ï¥à ÎåÄÍ∏∞ ÌõÑ Ï§ëÏïô ÌååÎèô ‚Üí 3Î≤àÏóê ÎÇòÎâòÏñ¥ Î≤àÍ∞úÏ≤òÎüº ÌôúÏÑ±Ìôî
            setTimeout(() => {
                const toolCount = document.getElementById('toolCount');
                let activatedTools = 0;

                // 3Í∞ú ÌååÎèôÏúºÎ°ú ÌäπÏ†ï Ìï∏Îì§Îü¨ Í∑∏Î£π ÏßÄÏ†ï
                const groups = [
                    // 1ÌååÎèô: Data Sources, Entities, Relationships
                    domains.filter(d =>
                        d.name.includes('Data Sources') ||
                        d.name.includes('Entities') ||
                        d.name.includes('Relationships')
                    ),
                    // 2ÌååÎèô: Analytics, Investigation, Timeline
                    domains.filter(d =>
                        d.name.includes('Analytics') ||
                        d.name.includes('Investigation') ||
                        d.name.includes('Timeline')
                    ),
                    // 3ÌååÎèô: ÎÇòÎ®∏ÏßÄ (Geospatial, Reports, Collaboration, Security, Visualization, Audit Trail, Notifications)
                    domains.filter(d =>
                        d.name.includes('Geospatial') ||
                        d.name.includes('Reports') ||
                        d.name.includes('Collaboration') ||
                        d.name.includes('Security') ||
                        d.name.includes('Visualization') ||
                        d.name.includes('Audit Trail') ||
                        d.name.includes('Notifications')
                    )
                ];

                // 3Î≤àÏùò ÌååÎèô - 1.5Ï¥à Í∞ÑÍ≤©ÏúºÎ°ú Í≥†Ï†ï, ÏÑ†ÏùÄ ÎπÑÎèôÍ∏∞Î°ú Ï≤òÎ¶¨
                const waveMessages = [
                    "‚ö° Activating Core Systems...",
                    "‚ö° Security Modules Online...",
                    "‚ö° Full Integration Complete!"
                ];

                groups.forEach((group, groupIdx) => {
                    setTimeout(() => {
                        // ÌååÎèôÎ≥Ñ ÏÉÅÌÉú Î©îÏãúÏßÄ ÌëúÏãú
                        status.textContent = waveMessages[groupIdx];
                        status.style.opacity = '1';

                        // Ï§ëÏïôÏóêÏÑú ÌååÎèô Ìö®Í≥º üåä
                        createXBurst();
                        createXRing();

                        // Í∑∏Î£π ÎÇ¥ Ìï∏Îì§Îü¨Îì§ Î≥ëÎ†¨Î°ú ÌôúÏÑ±Ìôî (ÎπÑÎèôÍ∏∞Î°ú Î∞îÎ°úÎ∞îÎ°ú!)
                        group.forEach((domain, domainIdx) => {
                            setTimeout(() => {
                                // Ï§ëÏïôÏóêÏÑú Ìï∏Îì§Îü¨Î°ú ÏÑ† Í∑∏Î¶¨Í∏∞
                                const line1 = createLine(centerX, centerY, domain.vx, domain.vy);
                                setTimeout(() => line1.classList.add('active'), 75);

                                setTimeout(() => {
                                    domain.element.classList.remove('dimmed');
                                    domain.element.classList.add('active');
                                    createSpark(domain.vx, domain.vy);
                                }, 450);

                                // Ìï∏Îì§Îü¨ÏóêÏÑú ÎèÑÍµ¨Îì§Î°ú Î≥ëÎ†¨ ÌôïÏÇ∞
                                domain.toolElements.forEach((tool, toolIdx) => {
                                    setTimeout(() => {
                                        const line2 = createLine(domain.vx, domain.vy, tool.vx, tool.vy);
                                        setTimeout(() => line2.classList.add('active'), 75);

                                        setTimeout(() => {
                                            tool.element.style.opacity = '1'; // ÏßÑÌïòÍ≤å!
                                            tool.element.classList.add('active');
                                            createSpark(tool.vx, tool.vy);

                                            // ÎèÑÍµ¨ Ïπ¥Ïö¥Ìä∏ Ï¶ùÍ∞Ä
                                            activatedTools++;
                                            toolCount.textContent = `üîß Activated Tools: ${activatedTools}/180+`;
                                        }, 450);
                                    }, toolIdx * 100); // 50 ‚Üí 100 (2Î∞∞)
                                });
                            }, domainIdx * 160); // 80 ‚Üí 160 (2Î∞∞)
                        });

                    }, groupIdx * 1500); // ÌååÎèô Í∞ÑÍ≤©: 1.5Ï¥à!
                });

                // 3ÌååÎèô ÏôÑÎ£å (4.5Ï¥à) ÌõÑ 2Ï¥à Îí§ Thank youÏôÄ Ìï®Íªò Ï≤úÏ≤úÌûà ÏÇ¨ÎùºÏßÄÍ∏∞
                setTimeout(() => {
                    // Thank you Î©îÏãúÏßÄ ÌëúÏãú
                    status.textContent = 'Thank you! üëã';
                    status.style.opacity = '1';

                    // 2Ï¥àÍ∞Ñ Thank you Ïú†ÏßÄ ÌõÑ ÌéòÏù¥ÎìúÏïÑÏõÉ ÏãúÏûë
                    setTimeout(() => {
                        // Î™®Îì† ÏöîÏÜå Ï≤úÏ≤úÌûà ÏÇ¨ÎùºÏßÄÍ∏∞ (2Ï¥àÍ∞Ñ)
                        // 1. ÏÑ† Î®ºÏ†Ä ÏÇ¨ÎùºÏßÄÍ∏∞
                        document.querySelectorAll('.connection-line').forEach(line => {
                            line.style.transition = 'opacity 2s ease';
                            line.style.opacity = '0';
                        });

                        // 2. ÎÖ∏ÎìúÎì§ÎèÑ Ìï®Íªò ÏÇ¨ÎùºÏßÄÍ∏∞
                        setTimeout(() => {
                            domains.forEach((domain) => {
                                domain.element.style.transition = 'opacity 2s ease';
                                domain.element.style.opacity = '0';

                                domain.toolElements.forEach((tool) => {
                                    tool.element.style.transition = 'opacity 2s ease';
                                    tool.element.style.opacity = '0';
                                });
                            });
                        }, 200);

                        // 3. Thank you Î©îÏãúÏßÄÎèÑ Ìï®Íªò ÏÇ¨ÎùºÏßÄÍ∏∞
                        setTimeout(() => {
                            status.style.transition = 'opacity 2s ease';
                            status.style.opacity = '0';
                        }, 1000);

                        // 4. ÌîÑÎ°¨ÌîÑÌä∏ÏôÄ Tool Count(info-box)ÎèÑ Ìï®Íªò ÏÇ¨ÎùºÏßÄÍ∏∞
                        setTimeout(() => {
                            const promptInput = document.getElementById('promptInput');
                            const infoBox = document.querySelector('.info-box');
                            promptInput.style.transition = 'opacity 2s ease';
                            promptInput.style.opacity = '0';
                            infoBox.style.transition = 'opacity 2s ease';
                            infoBox.style.opacity = '0';
                        }, 500);

                        // 5. ÏôÑÏ†ÑÌûà Ï†ïÎ¶¨
                        setTimeout(() => {
                            document.querySelectorAll('.connection-line').forEach(line => line.remove());

                            // 6. Î¨¥Ìïú Î∞òÎ≥µ: Î™®Îì† Í≤ÉÏù¥ Ï†ïÎ¶¨Îêú ÌõÑ Ïû¨ÏãúÏûë
                            setTimeout(() => {
                                // Î™®Îì† ÏöîÏÜåÎ•º Ï¥àÍ∏∞ ÏÉÅÌÉúÎ°ú Î¶¨ÏÖã
                                const promptInput = document.getElementById('promptInput');
                                const infoBox = document.querySelector('.info-box');
                                const status = document.getElementById('status');

                                // opacityÎ•º Îã§Ïãú 1Î°ú Î≥µÍµ¨
                                promptInput.style.opacity = '1';
                                infoBox.style.opacity = '1';
                                status.style.opacity = '0';

                                // Î™®Îì† ÎèÑÎ©îÏù∏Í≥º ÎèÑÍµ¨ opacity Î≥µÍµ¨
                                domains.forEach((domain) => {
                                    domain.element.style.opacity = '0';
                                    domain.toolElements.forEach((tool) => {
                                        tool.element.style.opacity = '0';
                                    });
                                });

                                // currentScenario Î¶¨ÏÖã
                                currentScenario = 0;

                                // Îã§Ïãú ÏãúÏûë
                                setTimeout(() => {
                                    initialPreview();
                                }, 500);
                            }, 1500); // 1.5Ï¥à ÎåÄÍ∏∞ ÌõÑ Ïû¨ÏãúÏûë
                        }, 4000);
                    }, 2000); // 2Ï¥àÍ∞Ñ Thank you Ïú†ÏßÄ
                }, 6500); // 3ÌååÎèô(4.5Ï¥à) + 2Ï¥à ÎåÄÍ∏∞
            }, 5000);
        }

        const scenarios = [
            "Hi. Who are you?",
            "Analyze the relationship network between entities involved in the financial investigation case.",
            "Show me the entity details and timeline for all persons of interest in the case.",
            "Create a comprehensive report of the investigation findings and export it as PDF.",
            "Detect anomalies in the transaction data and identify suspicious patterns.",
            "Investigate the connections between entities across different locations and time periods. Generate a geospatial visualization and timeline analysis."
        ];

        let currentScenario = 0;

        function runNextScenario() {
            if (currentScenario >= scenarios.length) {
                // ÎßàÏßÄÎßâ ÏãúÎÇòÎ¶¨Ïò§ÎèÑ ÌîÑÎ°¨ÌîÑÌä∏ Ïó∞ÌïòÍ≤å ÌïòÍ≥† ÌîºÎÇ†Î†àÎ°ú
                const promptInput = document.getElementById('promptInput');
                promptInput.style.transition = 'opacity 0.8s ease';
                promptInput.style.opacity = '0.3';

                setTimeout(grandFinale, 1000);
                return;
            }

            const prompt = scenarios[currentScenario];
            const promptInput = document.getElementById('promptInput');

            // ÏÉà ÌîÑÎ°¨ÌîÑÌä∏ ÌéòÏù¥ÎìúÏù∏
            promptInput.style.transition = 'opacity 0.5s ease';
            promptInput.style.opacity = '1';
            promptInput.textContent = prompt;

            const duration = animateFlow(prompt);
            currentScenario++;

            // DoneÍ≥º ÏÑ†Îì§Ïù¥ ÏÇ¨ÎùºÏßà Îïå ÌîÑÎ°¨ÌîÑÌä∏Îäî Ïó∞ÌïòÍ≤å Ïú†ÏßÄ (0.3) & Tools 0ÏúºÎ°ú Î¶¨ÏÖã
            setTimeout(() => {
                const toolCount = document.getElementById('toolCount');
                promptInput.style.transition = 'opacity 0.8s ease';
                promptInput.style.opacity = '0.3';
                // ToolsÎèÑ 0ÏúºÎ°ú Î¶¨ÏÖã
                toolCount.textContent = 'üîß Activated Tools: 0/180+';
            }, duration + 700); // Done ÌëúÏãúÏôÄ ÎèôÏãúÏóê Ïó∞Ìï¥ÏßÄÍ∏∞ ÏãúÏûë

            setTimeout(runNextScenario, duration + 2500); // Done 0.7Ï¥à + ÌéòÏù¥ÎìúÏïÑÏõÉ 0.8Ï¥à + 1Ï¥à ÎåÄÍ∏∞
        }

        // Ï¥àÍ∏∞ ÌîÑÎ¶¨Î∑∞ Ïï†ÎãàÎ©îÏù¥ÏÖò
        function initialPreview() {
            const status = document.getElementById('status');

            // 0~1Ï¥à: Ï§ëÏïô ÏõêÎßå ÏºúÏßÑ ÏÉÅÌÉú (2Î∞∞ Îπ†Î•¥Í≤å)
            status.textContent = '‚ö° Initializing...';
            status.classList.add('active');

            // 1~2.5Ï¥à: Ï£ºÌô©ÏÉâ Ìï∏Îì§Îü¨ ÎÖ∏ÎìúÎì§ ÏÑúÏÑúÌûà ÏºúÏßÄÍ∏∞
            setTimeout(() => {
                status.textContent = 'üîß Loading Handlers...';
                domains.forEach((domain, idx) => {
                    setTimeout(() => {
                        domain.element.style.transition = 'opacity 0.75s ease'; // 1.5 / 2
                        domain.element.classList.add('active');
                        createSpark(domain.vx, domain.vy);
                    }, idx * 125); // 250 / 2
                });
            }, 1000); // 2000 / 2

            // Ìï∏Îì§Îü¨ Îã§ Îú¨ ÌõÑ 1Ï¥à ÎåÄÍ∏∞ ÌõÑ ÎÖ∏ÎûÄÏÉâ ÏãúÏûë (ÏïΩ 3.5Ï¥à)
            setTimeout(() => {
                status.textContent = 'All 180+ Tools Ready! üåü';
                domains.forEach((domain) => {
                    domain.toolElements.forEach((tool, toolIdx) => {
                        setTimeout(() => {
                            tool.element.style.transition = 'opacity 1s ease'; // 2 / 2
                            tool.element.style.opacity = '0.35'; // Ïó∞ÌïòÍ≤å
                            tool.element.style.visibility = 'visible';
                        }, toolIdx * 12.5); // 25 / 2
                    });
                });
            }, 3500); // 7000 / 2

            // 6~7Ï¥à: ÎÖ∏ÎûÄÏÉâÎßå opacity 0, Ìï∏Îì§Îü¨Îäî Ïñ¥ÎëêÏö¥ ÏÉÅÌÉúÎ°ú
            setTimeout(() => {
                domains.forEach((domain) => {
                    // Ìï∏Îì§Îü¨Îäî Ïñ¥ÎëêÏö¥ ÏÉÅÌÉúÎ°ú
                    domain.element.classList.remove('active');
                    domain.element.classList.add('dimmed');

                    // ÎèÑÍµ¨Îäî Ïó∞ÌïòÍ≤å Ïú†ÏßÄ (ÌèâÏÉÅÏãúÏóêÎèÑ Î≥¥Ïù¥Í≤å)
                    domain.toolElements.forEach((tool) => {
                        tool.element.style.transition = 'opacity 0.4s ease'; // 0.8 / 2
                        tool.element.style.opacity = '0.15'; // 0 ‚Üí 0.15 (ÌèâÏÉÅÏãúÏóêÎèÑ Ïó∞ÌïòÍ≤å Î≥¥ÏûÑ)
                        tool.element.style.visibility = 'visible';
                    });
                });

                status.classList.remove('active');

                // ÏãúÎÇòÎ¶¨Ïò§ ÏãúÏûë
                setTimeout(() => {
                    runNextScenario();
                }, 1000); // 2000 / 2
            }, 6000); // 12000 / 2
        }

        setTimeout(() => {
            initialPreview();
        }, 1000);
    </script>
</body>
</html>

