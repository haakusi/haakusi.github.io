<!DOCTYPE html>
<html data-theme="dark" data-lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Sewon Park</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
</head>
<body>
    <button class="theme-toggle" onclick="toggleTheme()" aria-label="Toggle dark mode">‚òÄÔ∏è</button>
    <button class="lang-toggle" onclick="toggleLanguage()" aria-label="Toggle language">EN</button>
    
    <div class="container">
        <header>
            <h1 data-en="Sewon Park" data-kr="Î∞ïÏÑ∏Ïõê">Sewon Park</h1>
            <p class="subtitle" data-en="Senior Research Engineer | AI & Full-Stack Development" data-kr="ÏÑ†ÏûÑ Ïó∞Íµ¨Ïõê | AI Î∞è ÌíÄÏä§ÌÉù Í∞úÎ∞ú">Senior Research Engineer | AI & Full-Stack Development</p>
            <div class="social-links">
                <a href="mailto:haakusi@gmail.com" aria-label="Email">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="2" y="4" width="20" height="16" rx="2"/>
                        <path d="m22 7-10 5L2 7"/>
                    </svg>
                </a>
                <a href="https://github.com/haakusi" target="_blank" aria-label="GitHub">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
                <a href="https://www.linkedin.com/in/sewon-p-38009a1a7/" target="_blank" aria-label="LinkedIn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/>
                    </svg>
                </a>
                <a href="https://twitter.com/haakusi_" target="_blank" aria-label="X (Twitter)">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                    </svg>
                </a>
            </div>
        </header>

        <nav class="navigation">
            <a href="index.html" class="nav-link active" data-en="Home" data-kr="Ìôà">Home</a>
            <a href="blog.html" class="nav-link" data-en="Blog" data-kr="Î∏îÎ°úÍ∑∏">Blog</a>
            <a href="cv.html" class="nav-link" data-en="CV" data-kr="Ïù¥Î†•ÏÑú">CV</a>
        </nav>

        <section class="about">
            <h2 data-en="About" data-kr="ÏÜåÍ∞ú">About</h2>
            <p data-en="AI Engineer & Full-Stack Developer with 7+ years of experience building enterprise solutions. Specializing in LLM-based applications, multi-agent systems, and MCP (Model Context Protocol) development. Currently architecting intelligent automation systems at Suprema Inc." 
               data-kr="7ÎÖÑ Ïù¥ÏÉÅÏùò Í≤ΩÌóòÏùÑ Í∞ÄÏßÑ AI ÏóîÏßÄÎãàÏñ¥Ïù¥Ïûê ÌíÄÏä§ÌÉù Í∞úÎ∞úÏûêÎ°ú ÏóîÌÑ∞ÌîÑÎùºÏù¥Ï¶à ÏÜîÎ£®ÏÖòÏùÑ Íµ¨Ï∂ïÌïòÍ≥† ÏûàÏäµÎãàÎã§. LLM Í∏∞Î∞ò Ïï†ÌîåÎ¶¨ÏºÄÏù¥ÏÖò, Î©ÄÌã∞ ÏóêÏù¥Ï†ÑÌä∏ ÏãúÏä§ÌÖú, MCP(Model Context Protocol) Í∞úÎ∞úÏùÑ ÏßÑÌñâÌïòÍ≥† ÏûàÏäµÎãàÎã§. ÌòÑÏû¨ ÏäàÌîÑÎ¶¨ÎßàÏóêÏÑú ÏßÄÎä•Ìòï ÏûêÎèôÌôî ÏãúÏä§ÌÖúÏùÑ ÏÑ§Í≥ÑÌïòÍ≥† ÏûàÏäµÎãàÎã§.">AI Engineer & Full-Stack Developer with 7+ years of experience building enterprise solutions. Specializing in LLM-based applications, multi-agent systems, and MCP (Model Context Protocol) development. Currently architecting intelligent automation systems at Suprema Inc.</p>
        </section>

        <section class="interests">
            <h2 data-en="Interests" data-kr="Í¥ÄÏã¨ÏÇ¨">Interests</h2>
            <p data-en="Actively exploring Programming Massively Parallel Processors and the mathematical foundations of LLM architectures, examining computational complexity theory, optimization landscapes, and emergent behaviors in large-scale neural systems. Passionate about advancing the theoretical understanding of how quantum computing can fundamentally transform machine learning paradigms."
               data-kr="ÎåÄÍ∑úÎ™® Î≥ëÎ†¨ ÌîÑÎ°úÏÑ∏ÏÑú ÌîÑÎ°úÍ∑∏ÎûòÎ∞çÍ≥º LLM ÏïÑÌÇ§ÌÖçÏ≤òÏùò ÏàòÌïôÏ†Å Í∏∞Î∞òÏùÑ Ï†ÅÍ∑πÏ†ÅÏúºÎ°ú ÌÉêÍµ¨ÌïòÎ©∞, Í≥ÑÏÇ∞ Î≥µÏû°ÏÑ± Ïù¥Î°†, ÏµúÏ†ÅÌôî, Í∑∏Î¶¨Í≥† ÎåÄÍ∑úÎ™® Ïã†Í≤ΩÎßù ÏãúÏä§ÌÖúÏùÑ Ïó∞Íµ¨ÌïòÍ≥† ÏûàÏäµÎãàÎã§. ÏñëÏûê Ïª¥Ìì®ÌåÖÏù¥ Î®∏Ïã†Îü¨Îãù Ìå®Îü¨Îã§ÏûÑÏùÑ Í∑ºÎ≥∏Ï†ÅÏúºÎ°ú Î≥ÄÌôîÏãúÌÇ¨ Ïàò ÏûàÎäî Î∞©Î≤ïÏóê ÎåÄÌïú Ïù¥Î°†Ï†Å Ïù¥Ìï¥Î•º Î∞úÏ†ÑÏãúÌÇ§Îäî Îç∞ Ïó¥Ï†ïÍ≥º Í¥ÄÏã¨ÏùÑ Í∞ÄÏßÄÍ≥† ÏûàÏäµÎãàÎã§.">Actively exploring Programming Massively Parallel Processors and the mathematical foundations of LLM architectures, examining computational complexity theory, optimization landscapes, and emergent behaviors in large-scale neural systems. Passionate about advancing the theoretical understanding of how quantum computing can fundamentally transform machine learning paradigms.</p>
        </section>

        <section class="recently">
            <h2 data-en="Recently" data-kr="ÏµúÍ∑º">Recently</h2>
            <p data-en="Research interests lie at the fundamental intersection of quantum computation and financial modeling. Investigating the theoretical foundations of Quantum Machine Learning (QML) and Quantum Neural Networks (QNN) for financial market dynamics prediction, with focus on quantum advantage in complex financial pattern recognition. Academic publications exploring quantum-classical hybrid architectures currently in preparation."
               data-kr="Ïó∞Íµ¨ Í¥ÄÏã¨ÏÇ¨Îäî ÏñëÏûê Ïª¥Ìì®ÌåÖÍ≥º Í∏àÏúµ Î™®Îç∏ÎßÅÏùò Í∑ºÎ≥∏Ï†ÅÏù∏ Î∂ÄÎ∂ÑÎì§Ïóê ÏûàÏäµÎãàÎã§. Î≥µÏû°Ìïú Í∏àÏúµ Ìå®ÌÑ¥ Ïù∏ÏãùÏóêÏÑú ÏñëÏûê Ïö∞ÏúÑÏóê Ï¥àÏ†êÏùÑ ÎßûÏ∂∞ Í∏àÏúµ ÏãúÏû• Ïó≠Ìïô ÏòàÏ∏°ÏùÑ ÏúÑÌïú ÏñëÏûê Î®∏Ïã†Îü¨Îãù(QML)Í≥º ÏñëÏûê Ïã†Í≤ΩÎßù(QNN)Ïùò Ïù¥Î°†Ï†Å Í∏∞Î∞òÏùÑ Ïó∞Íµ¨ÌïòÍ≥† ÏûàÏäµÎãàÎã§. ÏñëÏûê-Í≥†Ï†Ñ ÌïòÏù¥Î∏åÎ¶¨Îìú ÏïÑÌÇ§ÌÖçÏ≤òÎ•º ÌÉêÍµ¨ÌïòÎäî ÌïôÏà† ÎÖºÎ¨∏ÏùÑ Ï§ÄÎπÑ Ï§ëÏûÖÎãàÎã§.">Research interests lie at the fundamental intersection of quantum computation and financial modeling. Investigating the theoretical foundations of Quantum Machine Learning (QML) and Quantum Neural Networks (QNN) for financial market dynamics prediction, with focus on quantum advantage in complex financial pattern recognition. Academic publications exploring quantum-classical hybrid architectures currently in preparation.</p>
        </section>

        <section class="visitor-stats">
            <h2 data-en="Visitor Statistics" data-kr="Î∞©Î¨∏Ïûê ÌÜµÍ≥Ñ">Visitor Statistics</h2>
            <div class="visitor-content">
                <div class="visitor-map">
                    <div id="world-map"></div>
                </div>
                <div class="visitor-info">
                    <div class="visitor-counter">
                        <h3 data-en="Total Visits" data-kr="Ï¥ù Î∞©Î¨∏ Ïàò">Total Visits</h3>
                        <div class="counter-display">
                            <span id="visitor-count">0</span>
                        </div>
                        <div class="unique-counter">
                            <small data-en="Unique Visitors: " data-kr="Ïàú Î∞©Î¨∏Ïûê: ">Unique Visitors: </small>
                            <span id="unique-count">0</span>
                        </div>
                    </div>
                    <div class="country-stats">
                        <h3 data-en="Visitors by Country" data-kr="Íµ≠Í∞ÄÎ≥Ñ Î∞©Î¨∏Ïûê">Visitors by Country</h3>
                        <div id="country-list"></div>
                    </div>
                </div>
            </div>
        </section>


        <footer>
            <p>Last updated: August 2025</p>
        </footer>
    </div>

    <script>
        function toggleTheme() {
            const html = document.documentElement;
            const currentTheme = html.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            
            html.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            
            // Update button icon
            const button = document.querySelector('.theme-toggle');
            button.textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
        }

        function toggleLanguage() {
            const html = document.documentElement;
            const currentLang = html.getAttribute('data-lang') || 'en';
            const newLang = currentLang === 'en' ? 'kr' : 'en';
            
            html.setAttribute('data-lang', newLang);
            localStorage.setItem('language', newLang);
            
            // Update button text
            const button = document.querySelector('.lang-toggle');
            button.textContent = newLang === 'en' ? 'EN' : 'Ìïú';
            
            // Update content
            updateContent(newLang);
        }

        function updateContent(lang) {
            const elements = document.querySelectorAll('[data-en][data-kr]');
            elements.forEach(element => {
                if (lang === 'kr' && element.getAttribute('data-kr')) {
                    element.textContent = element.getAttribute('data-kr');
                } else if (lang === 'en' && element.getAttribute('data-en')) {
                    element.textContent = element.getAttribute('data-en');
                }
            });
        }

        // Load saved theme and language on page load
        document.addEventListener('DOMContentLoaded', function() {
            const savedTheme = localStorage.getItem('theme') || 'dark';
            document.documentElement.setAttribute('data-theme', savedTheme);
            
            const themeButton = document.querySelector('.theme-toggle');
            themeButton.textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
            
            const savedLang = localStorage.getItem('language') || 'en'; // Default to English
            document.documentElement.setAttribute('data-lang', 'en'); // Force English default
            
            const langButton = document.querySelector('.lang-toggle');
            langButton.textContent = 'EN'; // Default to EN
            
            updateContent('en'); // Force English content
            
            // Initialize visitor tracking
            initializeVisitorTracking();
        });


        // Visitor tracking functionality
        async function initializeVisitorTracking() {
            // Initialize world map first - always show
            initializeWorldMap();
            
            try {
                // Try multiple IP services as fallback
                let data = null;
                
                // Try ipinfo.io first
                try {
                    const response = await fetch('https://ipinfo.io/json');
                    if (response.ok) {
                        const ipData = await response.json();
                        console.log('ipinfo.io response:', ipData);
                        
                        // Get full country name from code
                        const countryNames = {
                            'KR': 'South Korea',
                            'US': 'United States',
                            'JP': 'Japan',
                            'CN': 'China',
                            'GB': 'United Kingdom',
                            'DE': 'Germany',
                            'FR': 'France',
                            'IN': 'India',
                            'BR': 'Brazil',
                            'CA': 'Canada',
                            'AU': 'Australia'
                        };
                        
                        data = {
                            country_name: countryNames[ipData.country] || ipData.country,
                            country_code: ipData.country
                        };
                    }
                } catch (e) {
                    console.log('ipinfo.io failed:', e);
                }
                
                // If no data yet, try geojs.io (better for Asia)
                if (!data) {
                    try {
                        const response = await fetch('https://get.geojs.io/v1/ip/country.json');
                        if (response.ok) {
                            const ipData = await response.json();
                            console.log('geojs.io response:', ipData);
                            data = {
                                country_name: ipData.name,
                                country_code: ipData.country
                            };
                        }
                    } catch (e) {
                        console.log('geojs.io failed:', e);
                    }
                }
                
                // If we got location data, update visitor count
                if (data) {
                    const country = data.country_name || 'Unknown';
                    const countryCode = data.country_code || 'XX';
                    
                    console.log('Detected visitor from:', country, countryCode);
                    
                    // Update visitor count
                    updateVisitorCount(country, countryCode);
                } else {
                    // Fallback - just count as unknown visitor
                    console.log('Could not detect location, counting as Unknown');
                    updateVisitorCount('Unknown', 'XX');
                }
                
            } catch (error) {
                console.log('Visitor tracking error:', error);
                // Still count the visit even if location detection fails
                updateVisitorCount('Unknown', 'XX');
            }
        }

        function updateVisitorCount(country, countryCode) {
            console.log('Updating visitor count for:', country, countryCode);
            
            // Get existing visitor data from localStorage
            let visitorData = JSON.parse(localStorage.getItem('visitorData')) || {
                totalVisits: 0,
                uniqueVisitors: 0,
                countries: {},
                lastVisit: null,
                visitorId: null
            };
            
            console.log('Current visitor data:', visitorData);
            
            // Check if this is a new unique visitor
            const sessionId = sessionStorage.getItem('visitorSessionId');
            if (!sessionId) {
                // New session - increment unique visitors
                sessionStorage.setItem('visitorSessionId', Date.now().toString());
                visitorData.uniqueVisitors = (visitorData.uniqueVisitors || 0) + 1;
                console.log('New unique visitor, total unique:', visitorData.uniqueVisitors);
            }
            
            // Update country count
            if (visitorData.countries[countryCode]) {
                visitorData.countries[countryCode].count++;
            } else {
                visitorData.countries[countryCode] = {
                    name: country,
                    count: 1
                };
            }
            
            // Always increment total visits
            visitorData.totalVisits++;
            visitorData.lastVisit = new Date().toISOString();
            
            console.log('Updated visitor data:', visitorData);
            
            // Save updated data
            localStorage.setItem('visitorData', JSON.stringify(visitorData));
            
            // Update display with total visits (all visits from this browser)
            document.getElementById('visitor-count').textContent = visitorData.totalVisits;
            document.getElementById('unique-count').textContent = visitorData.uniqueVisitors;
            updateCountryList(visitorData.countries);
            
            // Refresh the map dots
            if (worldMap) {
                addVisitorDots();
            }
        }

        function updateCountryList(countries) {
            const countryList = document.getElementById('country-list');
            const sortedCountries = Object.entries(countries)
                .sort(([,a], [,b]) => b.count - a.count);
            
            const totalCountries = sortedCountries.length;
            const showAll = totalCountries <= 10;
            const displayCountries = showAll ? sortedCountries : sortedCountries.slice(0, 8);
            
            let html = displayCountries.map(([code, data]) => 
                `<div class="country-item">
                    <span class="country-flag">${getFlagEmoji(code)}</span>
                    <span class="country-name">${data.name}</span>
                    <span class="country-count">${data.count}</span>
                </div>`
            ).join('');
            
            // If more than 10 countries, show summary
            if (!showAll) {
                const remainingCount = totalCountries - 8;
                html += `<div class="country-item country-more">
                    <span class="country-flag">üåç</span>
                    <span class="country-name">+${remainingCount} more countries</span>
                    <span class="country-count">...</span>
                </div>`;
            }
            
            countryList.innerHTML = html;
        }

        function getFlagEmoji(countryCode) {
            const codePoints = countryCode
                .toUpperCase()
                .split('')
                .map(char => 127397 + char.charCodeAt());
            return String.fromCodePoint(...codePoints);
        }

        let worldMap = null;
        let visitorMarkers = [];

        function initializeWorldMap(centerCountryCode = null) {
            try {
                const mapContainer = document.getElementById('world-map');
                
                if (!mapContainer) {
                    console.error('Map container not found!');
                    return;
                }
                
                // Clear any existing map
                if (worldMap) {
                    worldMap.remove();
                    worldMap = null;
                }
                
                // Initialize Leaflet map with clean bounds
                worldMap = L.map('world-map', {
                    center: [30, 60], // Center between Americas and Asia
                    zoom: 2,
                    worldCopyJump: false, // Prevent world copies
                    maxBounds: [[-85, -180], [85, 180]],
                    maxBoundsViscosity: 1.0
                });
                
                // Add OpenStreetMap tile layer
                const tileLayer = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: '',
                    noWrap: true,
                    bounds: [[-90, -180], [90, 180]]
                });
                
                tileLayer.addTo(worldMap);
                
                // Wait for tiles to load properly
                tileLayer.on('load', function() {
                    console.log('Tiles loaded successfully');
                });
                
                // Disable interactions
                worldMap.dragging.disable();
                worldMap.touchZoom.disable();
                worldMap.doubleClickZoom.disable();
                worldMap.scrollWheelZoom.disable();
                worldMap.boxZoom.disable();
                worldMap.keyboard.disable();
                if (worldMap.tap) worldMap.tap.disable();
                
                // Remove zoom control
                worldMap.zoomControl.remove();
                
                console.log('Map initialized');
                
                // Add visitor markers after map is fully loaded
                worldMap.whenReady(function() {
                    console.log('Map is ready, waiting for tiles to load...');
                    setTimeout(() => {
                        console.log('Adding visitor markers now...');
                        addVisitorDots();
                    }, 1000); // Wait longer for tiles to load
                });
                
            } catch (error) {
                console.error('Error initializing map:', error);
            }
        }

        function getCountryCoordinates() {
            // Real geographical coordinates (latitude, longitude)
            return {
                // Unknown location - hide marker off screen
                'XX': [-90, -180], // Hide unknown visitors off map
                
                // North America
                'US': [39.8283, -98.5795], 'CA': [56.1304, -106.3468], 'MX': [23.6345, -102.5528],
                
                // South America  
                'BR': [-14.2350, -51.9253], 'AR': [-38.4161, -63.6167], 'CO': [4.5709, -74.2973], 
                'PE': [-9.1900, -75.0152], 'CL': [-35.6751, -71.5430], 'VE': [6.4238, -66.5897], 
                'UY': [-32.5228, -55.7658],
                
                // Europe
                'GB': [55.3781, -3.4360], 'FR': [46.6034, 1.8883], 'DE': [51.1657, 10.4515], 
                'IT': [41.8719, 12.5674], 'ES': [40.4637, -3.7492], 'NL': [52.1326, 5.2913], 
                'SE': [60.1282, 18.6435], 'NO': [60.4720, 8.4689], 'PL': [51.9194, 19.1451], 
                'RU': [61.5240, 105.3188], 'PT': [39.3999, -8.2245], 'CH': [46.8182, 8.2275],
                'AT': [47.5162, 14.5501], 'BE': [50.5039, 4.4699], 'DK': [56.2639, 9.5018], 
                'FI': [61.9241, 25.7482], 'IE': [53.1424, -7.6921], 'CZ': [49.8175, 15.4730], 
                'HU': [47.1625, 19.5033],
                
                // Africa
                'ZA': [-30.5595, 22.9375], 'NG': [9.0820, 8.6753], 'EG': [26.0975, 31.1351], 
                'KE': [-0.0236, 37.9062], 'MA': [31.7917, -7.0926], 'ET': [9.1450, 40.4897], 
                'DZ': [28.0339, 1.6596], 'LY': [26.3351, 17.2283], 'GH': [7.9465, -1.0232], 
                'TN': [33.8869, 9.5375],
                
                // Asia
                'CN': [35.8617, 104.1954], 'IN': [20.5937, 78.9629], 'JP': [36.2048, 138.2529], 
                'KR': [37.5665, 126.9780], 'TH': [15.8700, 100.9925], 'VN': [14.0583, 108.2772], // Seoul coordinates for Korea 
                'ID': [-0.7893, 113.9213], 'MY': [4.2105, 101.9758], 'PH': [12.8797, 121.7740], 
                'SG': [1.3521, 103.8198], 'TR': [38.9637, 35.2433], 'IR': [32.4279, 53.6880], 
                'SA': [23.8859, 45.0792], 'AE': [23.4241, 53.8478], 'IL': [31.0461, 34.8516], 
                'PK': [30.3753, 69.3451], 'BD': [23.6850, 90.3563], 'MM': [21.9162, 95.9560], 
                'LK': [7.8731, 80.7718], 'AF': [33.9391, 67.7100], 'IQ': [33.2232, 43.6793], 
                'SY': [34.8021, 38.9968], 'JO': [30.5852, 36.2384], 'LB': [33.8547, 35.8623],
                'KW': [29.3117, 47.4818], 'QA': [25.3548, 51.1839], 'OM': [21.4735, 55.9754], 
                'YE': [15.5527, 48.5164],
                
                // Oceania
                'AU': [-25.2744, 133.7751], 'NZ': [-40.9006, 174.8860], 'PG': [-6.3150, 143.9555], 
                'FJ': [-16.5780, 179.4144]
            };
        }

        function addVisitorDots() {
            if (!worldMap) {
                console.log('World map not initialized yet');
                return;
            }
            
            const visitorData = JSON.parse(localStorage.getItem('visitorData')) || { countries: {} };
            console.log('Adding visitor dots for countries:', Object.keys(visitorData.countries));
            
            // Clear existing markers
            visitorMarkers.forEach(marker => worldMap.removeLayer(marker));
            visitorMarkers = [];
            
            // Get country coordinates
            const countryCoords = getCountryCoordinates();
            
            Object.entries(visitorData.countries).forEach(([code, data]) => {
                const coords = countryCoords[code];
                if (coords) {
                    const [lat, lng] = coords;
                    console.log(`Creating marker for ${code} (${data.name}) at [${lat}, ${lng}] with ${data.count} visits`);
                    
                    // COMPLETELY DIFFERENT APPROACH: Use basic default Leaflet marker first
                    console.log(`üîç Creating BASIC marker for ${code} at [${lat}, ${lng}]`);
                    
                    // Just use the most basic marker possible
                    const marker = L.marker([lat, lng]);
                    marker.addTo(worldMap);
                    visitorMarkers.push(marker);
                    
                    console.log(`üìç BASIC marker added for ${code} (${data.name}) at [${lat}, ${lng}]`);
                    console.log(`Map bounds:`, worldMap.getBounds());
                    console.log(`Map center:`, worldMap.getCenter());
                    
                    // Check if coordinates are within map bounds
                    const isInBounds = worldMap.getBounds().contains([lat, lng]);
                    console.log(`Marker ${code} in bounds: ${isInBounds}`);
                    
                    // Add popup with country info
                    marker.bindPopup(`
                        <div style="text-align: center; font-family: Georgia, serif; padding: 5px;">
                            <div style="font-size: 2em; margin-bottom: 5px;">${getFlagEmoji(code)}</div>
                            <div style="font-size: 1.1em; font-weight: bold; margin-bottom: 3px;">${data.name}</div>
                            <div style="color: #666; font-size: 0.9em;">${data.count} visitor${data.count > 1 ? 's' : ''}</div>
                        </div>
                    `);
                } else {
                    console.log(`No coordinates found for country code: ${code}`);
                }
            });
            
            console.log(`Total markers added: ${visitorMarkers.length}`);
        }
    </script>
</body>
</html>